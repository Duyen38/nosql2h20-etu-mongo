# Модель данных NoSql
## 1. Графическое представление
Графическое представление модели показано на рисунке 1
![mongo](https://github.com/moevm/nosql2h20-etu-mongo/blob/master/ui_model/mongo_classes.png)  
Рисунок 1 – графическое представление модели данных в mongodb.
## 2. Описание коллекций, типов данных и сущностей
### Модель состоит из 4 сущностей
1)	Факультет (F – количество факультетов) 62Б + 12Б * K  
•	“_id”: objectId – идентификатор, 12Б  
•	“name”: String – название факультета, 50 * 1Б  
•	“departments”: objectId[] – список кафедр, количество кафедр * 12Б  
2)	Кафедра (K – количество кафедр) 62Б + 12Б * E  
•	“id”: objectId - идентификатор, 12Б  
•	“name”: String – название кафедры, 50 * 1Б  
•	“employees”: objectId[] – список работников кафедры, количество работников кафедры * 12Б  
3)	Дисциплина (D – количество дисциплин) 62Б  
•	“id”: objectId – идентификатор, 12Б  
•	“name”: String – название дисциплины, 50 * 1Б  
4)	Сотрудник (E – количество сотрудников) 1162Б + 12Б * D  
•	“id”: objectId – идентификатор, 12Б  
•	“name”: String – имя сотрудника, 50 * 1Б  
•	“email”: String – имейл сотрудника, 25 * 1Б  
•	“degree”: String – ученая степень сотрудника, 50 * 1Б  
•	“area_of_interest”: String – область профессиональных интересов, 500 * 1Б   
•	“scientific_works”: String – научные работы, 500 * 1Б  
•	“position”: String – должность на кафедре, 25 * 1Б  
•	“disciplines”: objectId[] – список проводимых предметов, количество дисциплин * 12Б  
## 3.	Расчет занимаемой памяти
Предположим в базе данных находится E моделей каждой сущности.
Тогда чистый объем будет равен: (62Б + 12Б * E) * E + (62Б + 12Б * E) * E + 62Б * E + (1162Б + 12Б * E) * E = 1348Б * E + 36Б * E^2  
Фактический объем равен: (122Б + 15Б * E) * E + (100Б + 15Б * Е) * E + (791Б + 15Б * E) * E + 128Б * E = 1141 * E + 45Б * E^2  
Избыточность модели: (1141 * E + 45Б * E^2) / (1348Б * E + 36Б * E^2)  
## 4.	Примеры запросов
//Запрос на редактирование 
db.employee.update( { “name” : ”Kiril Krinkin” } , { “name” : “Kirill Krinkin” } ); - 1 запрос для обновления коллекции, 2 запроса для обращения к таблицe Employee, так как мы образаемся к таблице department.
//Экспорт данных
db.employee.find({id: "9848284"}) получаем из нужной коллекции файл и дальше отдаем его приожению - 1 запрос на поиск данных.
//Вставка значений  
db.disciplines.insertOne({"name": "Разработка программного обеспечения информационных систем"}) – 1 запрос для добавления данных в таблицу Discipline, 3 для Employee, так как мы обращаемся к таблицам Department и Discipline. От количества данных не зависит  
//Поиск значений  
db.employees.find({name: "Кирилл Кринкин"}, {position: “Доцент”}) 1 запрос для коллекции  
## 5. Пример модели данных в mongodb
![example](https://github.com/moevm/nosql2h20-etu-mongo/blob/master/ui_model/example_mongo.png)  
# Модель данных Sql
## 1.	Графическое представление
Графическое представление модели данных MySql показана на рис. 2
![sql](https://github.com/moevm/nosql2h20-etu-mongo/blob/master/ui_model/sql_classes.png)  
Рисунок 2 – графическое представление модели данных в mySql.
## 2.	Описание коллекций, типов данных и сущностей
Было создано 4 таблицы аналогично mongodb. Таблицы Faculty, Department, Employee и Discipline.  
1)	Факультет (F – количество факультетов) 54Б  
•	Id: Int – идентификатор, 4Б  
•	Name: String – название факультета, 50 * 1Б  
2)	Кафедра (K – количество кафедр) 54Б  
•	Id: Int – идентификатор, 4Б  
•	Name: String – название кафедры, 50 * 1Б  
3)	Дисциплина (D – количество дисциплин) 54Б   
•	Id: Int – идентификатор, 4Б  
•	Name: String – имя сотрудника, 50 * 1Б  
4)	Сотрудник (E – количество сотрудников) 1154Б  
•	Id: Int – идентификатор, 4Б  
•	Name: String – название дисциплины, 50 * 1Б  
•	Email: String – почта сотрудника, 25 * 1Б  
•	Degree: String – ученая степень сотрудника, 50 * 1Б  
•	Area_of_interest: String – область профессиональных интересов, 500 * 1Б   
•	Scientific_works: String – научные работы, 500 * 1Б  
•	Position: String – должность на кафедре, 25 * 1Б  
## 3.	Расчет занимаемой памяти
Предположим в базе данных находится E моделей каждой сущности.   
Тогда чистый объем будет равен: 54Б * E + 54Б * E + 54Б * E + 1154Б * E = 1316Б * E    
Фактический объем равен: 58Б * E + 54Б * E + 54Б * E + 1158Б * E = 1324Б * E  
Избыточность модели:(1324Б * E) / (1316Б * E) = 1.0061   
## 4.	Примеры запросов
//Выбор всех данных в таблице Employee  
SELECT * FROM Employee 1 запрос  
//Обновление данных в таблице Employee  
UPDATE Employee SET name = ‘MARK’ where positon = ‘Доцент' 1 запрос  
# Сравнение MongoDB и Sql моделей данных
Запросы в mongodb более понятны и просты в реализации, нежели, чем в sql. Для юзкейсов было проведено сравнение количества запросов. Было получено, что количество запросов для sql будет меньше, чем в mongodb, но не на порядок. Это связано с тем, что в mongodb приходится обновлять ссылки в моделях данных.
Mongodb требует большего количества памяти, нежели mysql из-за необходимости хранения ссылок на id.
Для данной задачи больше подходит mysql, так как есть определенные преимущества в количестве памяти и скорости работы.
